<%- include('partials/header') %>

<main>
    <h1>Welcome, <%= userName %>!</h1>
    
    <section class="create-post">
        <h2>Create New Post</h2>
        <form action="/post" method="POST">
            <div>
                <label for="title">Title:</label>
                <input type="text" name="title" id="title" required />
            </div>
            <div>
                <label for="content">Content:</label>
                <textarea name="content" id="content" rows="5" required></textarea>
            </div>
            <input type="submit" value="Create Post" />
        </form>
    </section>

    <section class="posts-list">
        <h2>All Posts</h2>
        <% if (posts.length === 0) { %>
            <p>No posts yet. Create your first post!</p>
        <% } else { %>
            <% posts.forEach(function(post) { %>
                <article class="post-summary">
                    <h3><%= post.title %></h3>
                    <p>
                        <% if (post.content.length > 100) { %>
                            <%= post.content.substring(0, 100) %>...
                        <% } else { %>
                            <%= post.content %>
                        <% } %>
                    </p>
                    <a href="/post/<%= post.id %>">Read More</a>
                </article>
            <% }); %>
        <% } %>
    </section>
</main>

<%- include('partials/footer') %>